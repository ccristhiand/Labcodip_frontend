
<div class="grid">
    <div class="col-12">
		<div class="card">
			<h5>RESULTADO DE PACIENTE</h5>

			<p-toast key="tst"></p-toast>
            <p-toolbar styleClass="mb-12">
                <ng-template pTemplate="left">
                    <div class="my-2">
                        <span class="block mt-2 md:mt-0 p-input-icon-left">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text" maxlength="50" (keyup.enter)="buscarPaciente()" [(ngModel)]="valor" placeholder="BUSCAR PACIENTE"  class="w-full sm:w-auto"/>
                        </span>
					</div>
                </ng-template>

                <ng-template pTemplate="right">
					<button pButton pRipple label="Buscar" icon="pi pi-search" class="p-button-warning mr-2" (click)="buscarPaciente()"></button>
				</ng-template>
            </p-toolbar>

			<p-tabView orientation="left">
				<p-tabPanel class="line-height-6 m-2">
                    <div class="grid p-fluid">
                        <div class="col-12 md:col-7">
                            <h4>{{datosPersonal}}</h4>
                            <div class="card">
                                <div class="graph">									
									<p-chart *ngIf="datacollectionresultado.length>0" type="line" [data]="lineData" [options]="lineOptions"></p-chart>
									<span *ngIf="datacollectionresultado.length==0">No se encontraron registro</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 md:col-2">
                            <p-table #dt1 [value]="datacollectionresultado" dataKey="id" [rows]="10" [rowHover]="true"  [paginator]="true"  styleClass="p-datatable-gridlines"  responsiveLayout="scroll">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th style="min-width: 2rem" pSortableColumn="nroDocumento">Resultado </th>
										<th style="min-width: 2rem" pSortableColumn="userName">Examen </th>		
										<th style="min-width: 2rem" pSortableColumn="userName">F.Resul </th>					
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-data>
                                    <tr>
                                        <td>
                                            {{data.resultado}}
                                        </td>
                                        <td>
                                            {{data.abreviatura}}
                                        </td>   
										<td>
                                            {{data.strFechaResultadoHora}}
                                        </td>                                       
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="emptymessage">
                                    <tr>
                                        <td colspan="3">No se encontraron registro.</td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="loadingbody">
                                    <tr>
                                        <td colspan="3">Loading customers data. Please wait.</td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
						<div class="col-12 md:col-3">
                            <p-table #dt1 [value]="datacollection" dataKey="id" [rows]="10" [rowHover]="true"  [paginator]="true" styleClass="p-datatable-gridlines"  responsiveLayout="scroll">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th style="min-width: 2rem" pSortableColumn="nroDocumento">Paciente</th>
                                        <th style="min-width: 2rem" pSortableColumn="nroDocumento">Documento</th>
										<th style="min-width: 2rem" pSortableColumn="accion">Acciones</th>				
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-data>
                                    <tr>
                                        <td>
                                            {{data.nombreCompleto}}
                                        </td>
                                        <td>
                                            {{data.nroDocumento}}
                                        </td>
                                        <td>
											<button pButton pRipple icon="pi pi-eye" class="p-button-rounded p-button-info mr-2" (click)="buscarResultadoPaciente(data.idPersona, data.nombreCompleto)"></button>							
                                        </td>                                      
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="emptymessage">
                                    <tr>
                                        <td colspan="3">No se encontraron registro.</td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="loadingbody">
                                    <tr>
                                        <td colspan="3">Loading customers data. Please wait.</td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
				</p-tabPanel>
			</p-tabView>        
		</div>
	</div>
</div>
